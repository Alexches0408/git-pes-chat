import React, { useState } from 'react';

const CopyIcon = ({ onClick }) => {
  const [hovered, setHovered] = useState(false);
  const [active, setActive] = useState(false);

  const handleClick = (e) => {
    setActive(true);            
    onClick?.(e);               
    setTimeout(() => {
      setActive(false);
    }, 2000);
  };

  let content;
  if (active) {
    content = (
      <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_2884_30436)">
        <path d="M7 15.9908L9.94 20.499C10.0392 20.6527 10.1663 20.7777 10.3118 20.8645C10.4573 20.9512 10.6174 20.9976 10.78 20.9999C10.94 21.0022 11.0984 20.9618 11.2438 20.8819C11.3891 20.8019 11.5176 20.6842 11.62 20.5375L21 7" stroke="#9BA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
        <defs>
        <clipPath id="clip0_2884_30436">
        <rect width="16" height="16" fill="white" transform="translate(6 6)"/>
        </clipPath>
      </defs>
  </svg>
    );
  } else if (hovered) {
    content = (
      <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="28" height="28" rx="14" fill="#E1E2E5"/>
        <path d="M19.4755 8.52646C18.4935 8.28636 17.1388 8.28636 15.1425 8.28636C12.0366 8.28636 10.4837 8.28636 9.47159 9.19054C9.37227 9.27928 9.27801 9.37352 9.18926 9.47282C8.28496 10.4847 8.28496 12.0376 8.28496 15.1432C8.28496 17.1378 8.28496 18.4919 8.52454 19.4735M19.4755 8.52646C20.0212 8.65991 20.4518 8.86753 20.8134 9.19054C20.9127 9.27928 21.0069 9.37352 21.0957 9.47282C22 10.4847 22 12.0376 22 15.1432C22 18.2488 22 19.8016 21.0957 20.8135C21.0069 20.9128 20.9127 21.0071 20.8134 21.0958C19.8013 22 18.2484 22 15.1425 22C12.0366 22 10.4837 22 9.47159 21.0958C9.37227 21.0071 9.27801 20.9128 9.18926 20.8135C8.86576 20.4515 8.65798 20.0203 8.52454 19.4735M19.4755 8.52646C19.342 7.97969 19.1342 7.54846 18.8107 7.18646C18.722 7.08715 18.6277 6.99291 18.5284 6.90418C17.5163 6 15.9634 6 12.8575 6C9.75164 6 8.1987 6 7.18663 6.90418C7.08731 6.99291 6.99305 7.08715 6.90431 7.18646C6 8.19838 6 9.75119 6 12.8568C6 15.9624 6 17.5153 6.90431 18.5272C6.99305 18.6265 7.08731 18.7207 7.18663 18.8095C7.54819 19.1325 7.97878 19.3401 8.52454 19.4735" stroke="#9BA3AF" stroke-width="1.5"/>
      </svg>
    );
  } else {
    content = (
      <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19.4755 8.52646C18.4935 8.28636 17.1388 8.28636 15.1425 8.28636C12.0366 8.28636 10.4837 8.28636 9.47159 9.19054C9.37227 9.27928 9.27801 9.37352 9.18926 9.47282C8.28496 10.4847 8.28496 12.0376 8.28496 15.1432C8.28496 17.1378 8.28496 18.4919 8.52454 19.4735M19.4755 8.52646C20.0212 8.65991 20.4518 8.86753 20.8134 9.19054C20.9127 9.27928 21.0069 9.37352 21.0957 9.47282C22 10.4847 22 12.0376 22 15.1432C22 18.2488 22 19.8016 21.0957 20.8135C21.0069 20.9128 20.9127 21.0071 20.8134 21.0958C19.8013 22 18.2484 22 15.1425 22C12.0366 22 10.4837 22 9.47159 21.0958C9.37227 21.0071 9.27801 20.9128 9.18926 20.8135C8.86576 20.4515 8.65798 20.0203 8.52454 19.4735M19.4755 8.52646C19.342 7.97969 19.1342 7.54846 18.8107 7.18646C18.722 7.08715 18.6277 6.99291 18.5284 6.90418C17.5163 6 15.9634 6 12.8575 6C9.75164 6 8.1987 6 7.18663 6.90418C7.08731 6.99291 6.99305 7.08715 6.90431 7.18646C6 8.19838 6 9.75119 6 12.8568C6 15.9624 6 17.5153 6.90431 18.5272C6.99305 18.6265 7.08731 18.7207 7.18663 18.8095C7.54819 19.1325 7.97878 19.3401 8.52454 19.4735" stroke="#9BA3AF" stroke-width="1.5"/>
      </svg>
    );
  }

  return (
    <button
      type="button"
      onClick={handleClick}
      onMouseEnter={() => setHovered(true)}
      onMouseLeave={() => setHovered(false)}
      title="Скопировать сообщение"  
      style={{  
          background: "none",
          border: "none",
          padding: 0,
          margin: 0,
          outline: "none",
          cursor: "pointer",
          }}
    >
      {content}
    </button>
  );
};

export default CopyIcon;